<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[信息收集]]></title>
    <url>%2F2019%2F07%2F15%2F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%2F</url>
    <content type="text"><![CDATA[信息收集，收集的是那些信息？怎样收集？ 信息收集，收集的是那些信息？主要的就是服务器配置信息和网站的一些敏感信息，包含不限于网站域名(及子域名)、操作系统、CMS指纹、真实IP、开放的端口、Whois信息、备案信息、证书、敏感目录、防火墙、登录页面等等，这些信息会对后期渗透带来极大的作用 分类 主动收集 通过扫描确认目标安装的操作系统和网络服务，并发现潜在漏洞的过程 被动收集（外围信息收集） 在不接触目标的情况下搜集目标、网络、客户及其他信息 A记录、MX记录、CNAME记录……度娘百科 和 渗透测试相关总结 域名相关信息收集 这是在得到域名后的第一件事了吧...通常包括该域名的 DNS服务器信息和注册人的联系信息等 Whois信息 简单说，whois就是一个用来查询域名是否已经被注册，以及注册域名的详细信息的数据库（如域名所有人、域名注册商）。通过whois来实现对域名信息的查询。whois通常使用TCP协议43端口。每个域名/IP的whois信息由对应的管理机构保存。 ——度娘百科 在线 WHois查询网站： 站长之家 阿里云 爱站网 国外的网站可能用国内的 WHois查不到，所以使用国外的 WHois： Whois WHois2 本地 Tools： whois (kali工具) 备案信息查询 主要针对国内网站 天眼查 ICP备案查询网 子域名收集 子域名，是顶级域名（一级域名或父域名）的下一级。例如：mail.baidu.com 是 baidu.com 的子域名 子域名探测可以帮我们发现渗透测试中更多的服务，这将增加发现漏洞的可能性（旁注） Google Hacking site:baidu.com site:baidu.com -www 证书透明度 谷歌 Chrome要求2017年所有 SSL证书都要支持证书透明，所以可以根据 CT log查询支持 HTTPS网站的子域名证书透明度（CT）是证书授权机构（CA）的一个项目，证书授权机构会将每个 SSL/TLS证书发布到公共日志中。 一个SSL/TLS证书通常包含域名、子域名和邮件地址 Certificate Transparency logs（CT ） Crt Censys Google CT crossdomain.xml 文件 其他网站&amp;工具 【TODO】 漏洞： DNS 域传送漏洞 在线网站： DNSdumpster 是一个免费的域名分析网站，是HackerTarget旗下项目，可以查询相关的子域名或者旁站域名 dnsdb 全球 DNS搜索引擎 工具： Sublist3r 是一个python工具，旨在使用OSINT枚举网站的子域。 subDomainsBrute 本工具用于渗透测试目标域名收集。高并发DNS暴力枚举，发现其他工具无法探测到的域名, 如Google，aizhan，fofa wydomain 猪猪侠开发的工具 Knock Subdomain Scan 子域名扫描器，freebuf介绍 subfinder 它已成为 sublist3r项目的继承者。freebuf介绍 Layer子域名挖掘机 SubBrute 枚举域名系统记录和子域的域名系统元查询蜘蛛 aquatone 一款强大的域名工具，可以查子域名相同指纹站点 寻找真实 IP CDN（content delivery network 或 content distribution network）即内容分发网络。如果目标使用了 CDN，那么直接 Ping目标的域名，得到的 IP是离我们最近的一台目标节点的 CDN服务器 判断 CND是否存在 通过多地 Ping域名 通过多地 Ping域名，查看对应 IP 地址是否唯一，若不唯一，多半是使用了 CDN如果 IP大多不一样或者规律性很强，可以尝试查询这些 IP的归属地，判断是否存在 CDN 多地点 Ping在线网站： 站长之家 爱站网 IPIP 使用 nslookup nslookup会得到 DNS解析服务器保存在缓存中的非权威解答 1234567891011121314151617181920212223242526# 采用 CDN&gt; www.baidu.om非权威应答:www.baidu.com canonical name = www.a.shifen.com.Name: www.a.shifen.comAddress: 180.101.49.11Name: www.a.shifen.comAddress: 180.101.49.12# ----------------------------------# 无 CDN&gt; www.puercn.com非权威应答:Name: www.puercn.comAddress: 116.55.242.3# ----------------------------------&gt; maxiang.ioNon-authoritative answer:Name: maxiang.ioAddress: 115.29.201.173 修改本地 hosts文件 修改本地 hosts文件，强行将域名与 IP解析对应 然后访问域名查看页面是否变化 IP反查域名（这个……） 使用 IP反查域名的方式查找 IP下是否存在对应域名，如果使用了 CDN，会出现大量无关域名： 地址： IPIP 爱站网 绕过 CDN 查找网站真实 IP [TODO] 秃域名 因为现有很多 CDN厂商基本只要求把 www.xxx.com cname到 CDN主服务器上去，而且有人为了维护网站时更方便，不用等 CDN缓存，只让 WWW域名使用 CDN，秃域名不使用 123ping www.xxx.comping xxx.com 抓包 抓包观察 IP地址，使用 telnet去连接相应端口，如果返回 html则为真实 IP 内部邮箱源（RSS订阅、邮件等）* 有的服务器本地自带 sendmail，注册之后，会主动发一封邮件给我们，打开邮件的源代码，你就能看到邮件服务器的真实IP了，很大可能与主站处在一个网段 注意，如果是第三方或公共邮件服务器是没用的 查询子域名* 很多站长可能只会对主站或者流量大的子站点做了 CDN，很多子站点又跟主站 在同一台服务器或者同一个C段内，从而能判断出目标的真实 IP段 国外主机解析域名&amp;国外 DNS* 国内很多 CDN 厂商因为各种原因只做了国内的线路，而针对国外的线路可能几乎没有，此时我们使用国外的主机直接访问可能就能获取到真实 IP 国外 DNS： 12345678# 目标并未使用 CDN，这里只是举一个使用方法的例子root@arch ~ -&gt;# nslookup maxiang.io 8.8.8.8 Server: 8.8.8.8Address: 8.8.8.8#53Non-authoritative answer:Name: maxiang.ioAddress: 115.29.201.173 国外 Ping服务： App Synthetic Monitor 利用 SSL证书寻找真实原始IP* Finding The Real Origin IPs Hiding Behind CloudFlare or Tor [19 August 2018] 目标 APP抓包* 如果目标站有自己的 APP，可以通过 Fiddler或 Burp Suite抓包，寻找真实 IP 利用网站漏洞(近距离与网站进行 Py交易)* 例如xss、ssrf、命令执行反弹shell等 历史解析记录 查看一些历史的 A记录说不定会发现什么 但是更多的可能是那个 IP已经不在用了… 在线网站： SecurityTrails 17CE Site report RiskIQ [需要注册] 12345678910111213141516# 目标并未使用 CDN，这里只是举一个使用方法的例子root@arch ~ -&gt;# curl -H "Host: www.puercn.com" 116.55.242.3 -k# 返回首页root@arch ~ -&gt;# curl -H "Host: www.puercn.com" 116.55.243.79 -kcurl: (7) Failed to connect to 116.55.243.79 port 80: 连接超时root@arch ~ -&gt;# curl -H "Host: www.puercn.com" 116.55.242.4 -k&lt;html&gt;&lt;head&gt;&lt;title&gt;301 Moved Permanently&lt;/title&gt;&lt;/head&gt;&lt;body bgcolor="white"&gt;&lt;center&gt;&lt;h1&gt;301 Moved Permanently&lt;/h1&gt;&lt;/center&gt;&lt;hr&gt;&lt;center&gt;nginx&lt;/center&gt;&lt;/body&gt;&lt;/html&gt; 全网扫描* 通过扫描所有 IP，根据对比目标网站的 banner，找出其 IP 地址 可以用现成的搜索引擎： shodan、fofa、 zoomeye或扫描工具 zmap、Masscan等等 (转)简单获取CDN背后网站的真实IP 使用 zmap扫描 利用 DDoS* 利用 DDoS耗光 DNS的流量，TG、暗网有专门的 DDoS 验证获取的 IP 找到目标的真实 IP后，如何验证其真实性？如果是 Web，可以直接访问 IP，看看响应页面是否和访问域名返回的一样， 其实上面判断 CDN的有些方法也可以；如果目标段比较大，可以借助类似 Masscan的工具批量扫描对应 IP段中所有开了 80、443、8080端口的 IP，然后逐个尝试访问，观察响应结果是否为目标站点 C段 [TODO] 当已获取某些子域名真实IP时，可以进行横向搜索，会有一些意想不到的收获 Site:10.12.3.* nmap -sS ip/24 在线工具 在线 C段查询 收集开放端口信息 在得到了网站的真实 IP后，就需要进一步的深入调查通过扫描服务器开放的端口以及从该端口判断服务器上存在的服务甚至服务的版本，就可以对症下药 常用工具： Nmap （主要使用） censys（虽然不全） zmap 偏向于扫描指定范围内主机的某个指定端口是否开放 Masscan 可用作 Nmap的替代品 nmap -sS xxx.com -p 21,22,23,3389nmap -sS xxx.com -Fnmap -sS xxx.com... 服务器系统 网址大小写是否敏感判断 Windows/Linux，Linux大小写敏感 nmap -sS xxx.com -O FOFA 网络空间安全引擎 CMS指纹扫描&amp;WAF [TODO] 这里的指纹是指网站 CMS指纹识别、计算机操作系统及 Web容器的指纹等 工具： header头信息 Wappalyzer 浏览器插件，能够分析目标网站所采用的平台构架、网站环境、服务器配置环境、JavaScript框架、编程语言等参数 云悉 云悉在线WEB指纹CMS识别平台 在线cms指纹识别 whatweb在线 WhatWaf 检测和绕过 web应用程序防火墙和保护系统 WAFW00F 识别 Web应用防火墙(WAF)产品的指纹 WhatWeb（kali） 可识别web技术，包括内容管理系统(CMS)、博客平台、统计/分析包、JavaScript库，Web服务器和嵌入式设备等 目录扫描 使用工具： DirSearch 和 字典 [居家必备] dir_scanner（MSF： msf5 &gt; use auxiliary/scanner/http/dir_scanner）目录扫描 robots_txt （MSF： msf5 &gt; use auxiliary/scanner/http/robots_txt） robots扫描 御剑后台扫描珍藏版 DirBuster 是 OWASP开发的一款基于 JAVA编写的、专门用来探测 Web服务器的目录和隐藏文件 漏洞扫描 在了解了大多数信息后，就可以更近一步的 进行漏洞扫描 漏洞扫描 漏洞扫描工具： Rapi7 Nexpose Nessus（强烈推荐）MSF创建新任务报错nessus.rb:979:in cmd_nessus_scan_new解决：#11117 若是持续出现 API Disabled，刷新无效，可在改回来 OpenVAS（开源工具） 网站应用程序扫描 在知道了目标的大体网络架构和运行的服务情况，并对网络进行的漏洞扫描后，就可以进行网站应用程序扫描 常用扫描工具： sqlmap BurpSuite ZAP（kali） WebScarab （kali） Ref 《黑客秘籍——渗透测试实用指南 第2版》 《Metasploit渗透测试魔鬼训练营》 《Web安全攻防 渗透测试实战指南》 web安全信息搜集 Web渗透测试-信息收集总结 渗透测试之信息收集 渗透测试0x00 信息收集 子域名收集笔记 绕过CDN，查找网站的真实IP Finding The Real Origin IPs Hiding Behind CloudFlare or Tor 绕过CDN查找真实IP方法 信息收集 - 端口扫描及服务识别 浅谈端口扫描技术 DF-PUSH(May.17)——抛弃过时的御剑：DirSearch引领web路径爆破新时代！ Metasploit 渗透测试手册第三版 第二章 信息收集与扫描 渗透测试相关总结]]></content>
      <tags>
        <tag>Web Secirty</tag>
        <tag>Secirty</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ADB常用命令]]></title>
    <url>%2F2019%2F06%2F22%2FADB%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%2F</url>
    <content type="text"><![CDATA[摘下红花送伊人红花似火绾青丝红花啊红花，绾起伊人的青丝伊人笑靥如花 摘下白花送伊人白花如雪别心口白花啊白花，别在伊人的心口伊人皎洁如月伊人皎洁如月 美绪Bilibili《多罗罗》 基本与应用 查看设备123$ adb devices # List of devices attached# cf264b8f device 进入shell12$ adb shell# OnePlus3T:/ $ ll 以 root 权限运行(手机需要 root)12345adb root# restarting adbd as root# adbd cannot run as root in production builds 无线连接（需要借助 USB 线）1234567891011121314151617# 找到 IP地址(ifconfig/ip addr/ip link)OnePlus3T:/ $ ifconfig# 让设备在 任意 端口监听 TCP/IP 连接root@arch ~ -&gt;# adb tcpip 8848# 断开连接# 通过 IP 地址连接设备adb connect &lt;device-ip-address[:port]&gt;root@arch ~ -&gt;# adb connect 192.168.1.3:8848# connected to 192.168.1.3:8848# 查看设备是否出现root@arch ~ -&gt;# adb devices# List of devices attached# 192.168.1.3:8848 unauthorized 断开无线连接123adb disconnect &lt;device-ip-address&gt;root@arch ~ -&gt;# adb disconnect 192.168.1.3:8848 查看应用列表12345678910111213141516171819202122# adb shell pm list packages [-f] [-d] [-e] [-s] [-3] [-i] [-u] [--user USER_ID] [FILTER]# -s 只显示系统应用# -3 只显示第三方应用# &lt;FILTER&gt; 包名包含 &lt;FILTER&gt; 字符串root@arch ~ -&gt;# adb shell pm list packages -3# package:com.github.shadowsocks# package:com.chenupt.day# package:org.telegram.messenger# package:com.niksoftware.snapseedroot@arch ~ -&gt;# adb shell pm list packages -s# package:com.oneplus.calculator# package:net.oneplus.weather# package:com.android.cts.priv.ctsshimroot@arch ~ -&gt;# adb shell pm list packages bili# package:com.hypergryph.arknights.bilibili# package:com.bilibili.comic# package:com.digitalsky.girlsfrontline.cn.bili# package:tv.danmaku.bili 安装/卸载 APK123456789# adb install [-lrtsdg] &lt;path_to_apk&gt;# -l 将应用安装到保护目录 /mnt/asec# -r 允许覆盖安装# -t 允许安装 AndroidManifest.xml 里 application 指定 android:testOnly="true" 的应用# -s 将应用安装到 sdcard# -d 允许降级覆盖安装# -g 授予所有运行时权限# 详细 : &lt;https://github.com/mzlogin/awesome-adb#%E5%AE%89%E8%A3%85-apk&gt; 1234# adb uninstall [-k] &lt;packagename&gt;# &lt;packagename&gt; 表示应用的包名，-k 参数可选，表示卸载应用但保留数据和缓存目录root@arch ~ -&gt;# adb uninstall com.bilibili.comic 清除应用数据与缓存12# adb shell dumpsys package &lt;packagename&gt;root@arch ~ -&gt;# adb shell pm clear com.bilibili.comic 查看应用详细信息1root@arch ~ -&gt;# adb shell dumpsys package com.bilibili.comic 查看应用安装路径1234# adb shell pm path &lt;PACKAGE&gt;root@arch ~ -&gt;# adb shell pm path com.bilibili.comic # package:/data/app/com.bilibili.comic-VefU-I3Sq3yFa7hzXBuAXg==/base.apk 强制停止应用123# adb shell am force-stop &lt;packagename&gt;root@arch ~ -&gt;# adb shell am force-stop com.taobao.taoba 文件管理 复制设备里的文件到电脑123# adb pull &lt;设备里的文件路径&gt; [电脑上的目录]root@arch ~ -&gt;# adb pull /sdcard/Pictures ~/Pictures 复制电脑里的文件到设备123# adb push &lt;电脑上的文件路径&gt; &lt;设备里的目录&gt;root@arch ~ -&gt;# adb push ~/Documents/Python/hello.py /sdcard/Python 模拟按键/输入12345678# input [&lt;source&gt;] &lt;command&gt; [&lt;arg&gt;...]# adb shell input keyevent &lt;keycode&gt;# 亮屏root@arch ~ -&gt;# adb shell input keyevent 224# 详细: &lt;https://github.com/mzlogin/awesome-adb#%E6%A8%A1%E6%8B%9F%E6%8C%89%E9%94%AE%E8%BE%93%E5%85%A5&gt; 实用功能截图保存到电脑1root@arch ~ -&gt;# adb exec-out screencap -p &gt; sc.png 录制屏幕12345678910# 录制屏幕以 mp4 格式保存到 /sdcardadb shell screenrecord /sdcard/filename.mp4# 按 Ctrl-C 停止# 默认录制时间和最长录制时间都是 180 秒# --size WIDTHxHEIGHT 视频的尺寸，比如 1280x720，默认是屏幕分辨率。# --bit-rate RATE 视频的比特率，默认是 4Mbps。# --time-limit TIME 录制时长，单位秒。# --verbose 输出更多信息。 Top &amp;&amp; ps123root@arch ~ -&gt;# adb shell toproot@arch ~ -&gt;# adb shell ps 查看进程 UID1234# adb shell dumpsys package &lt;packagename&gt; | grep userId=root@arch ~ -&gt;# adb shell dumpsys package com.bilibili.comic | grep userId= # userId=10203 基本的 linux命令（ls/cat/df/rm/…） Ref ADB Usage Complete / ADB 用法大全]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Blog Reference Link]]></title>
    <url>%2F2019%2F06%2F14%2FBlog-Reference-Link%2F</url>
    <content type="text"><![CDATA[恩 有点特别的信但是但这是……世界上最纯粹最美丽的思念 文伽Bilibili《死后文》 配置 Blog时参考的链接： 从jekyll到hexo Hexo的Next主题详细配置 hexo搭建个人博客–NexT主题优化 在Hexo博客上添加可爱的Live2D模型 Hexo添加字数统计、阅读时长 下载的hexo主题必须删掉.git 2个小时教你hexo博客添加评论、打赏… 使用GithubPages和Hexo搭建自己… 将hexo+github博客同步托管至coding NexT使用文档 使用Hexo+Next主题搭建自己的个人博客 Hexo中Gitalk配置使用教程 Hexo NexT主题中集成gitalk评论系统 Hexo中引入Mermaid流程图 hexo-filter-mermaid-diagrams 配置 gitalk评论系统注意 12345678910111213// gitalk.swig &lt;script type="text/javascript"&gt; var gitalk = new Gitalk(&#123; clientID: '&#123;&#123; theme.gitalk.ClientID &#125;&#125;', // &lt;---- clientSecret: '&#123;&#123; theme.gitalk.ClientSecret &#125;&#125;', // &lt;---- repo: '&#123;&#123; theme.gitalk.repo &#125;&#125;', owner: '&#123;&#123; theme.gitalk.githubID &#125;&#125;', admin: ['&#123;&#123; theme.gitalk.adminUser &#125;&#125;'], id: location.pathname, distractionFreeMode: '&#123;&#123; theme.gitalk.distractionFreeMode &#125;&#125;' &#125;) gitalk.render('gitalk-container') &lt;/script&gt; 123456789gitalk: enable: true githubID: evilH2O2 repo: gitalkComments ClientID: xxxx # &lt;---- 与上面对应，网上有版本不一样的 （ client_id ) ClientSecret: xxx # &lt;---- 与上面对应 owner: evilH2O2 adminUser: evilH2O2 distractionFreeMode: true 用 代码块(3个 `) + mermaid使用 Mermaid流程图 1234# ``3 mermaid# graph LR # A --&gt; B# ``3]]></content>
      <tags>
        <tag>Note</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Test Page]]></title>
    <url>%2F2019%2F06%2F12%2FTest-Page%2F</url>
    <content type="text"><![CDATA[本页面用来进行测试 h2h3h4h5 code code code code list1 list2 list3 llist1 llist2 list1 list2 list3 list4 Test404.py1234import osos.system("ls -l") I jump you jump 行千里路，吃万家菜 佚名, Internet您可就别点击了 https://404.com 404 $C^2$ graph LR subgraph 初始轮 txt[明文块] --> init0[加轮秘钥] end subgraph 普通轮 第1轮 pu0[字节代替] pu1[行移位] pu2[列混淆] pu3[加轮秘钥] end init0[加轮秘钥] --> pu0[字节代替] pu3[加轮秘钥] --> lue0[...] subgraph 普通轮 第9轮 pu20[字节代替] pu21[行移位] pu22[列混淆] pu23[加轮秘钥] end lue0[...] --> pu20[字节代替] subgraph 最终轮 end0[字节代替] end1[行移位] end2[加轮秘钥] end pu23[加轮秘钥] --> end0[字节代替] end2[加轮秘钥] --> end3[密文] subgraph 扩展密钥 expand0[W 0-15] expand1[W 16-31] expand2[W 144-159] expand3[W 160-175] end 密钥 --- expand0[W 0-15] expand0[W 0-15] --> init0[加轮秘钥] expand1[W 16-31] --> pu3[加轮秘钥] expand2[W 144-159] --> pu23[加轮秘钥] expand3[W 160-175] --> end2[加轮秘钥]]]></content>
      <tags>
        <tag>Test</tag>
      </tags>
  </entry>
</search>
